<nav>
  <div class="nav-container">
    <button id="hamburger-btn" class="hamburger" aria-label="Toggle navigation menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    
    <div id="nav-links" class="nav-links">
      <a href="/">Home</a>
      <a href="/managers">âš™ Managers</a>
      <a href="/transfers">Transfers</a>
      <a href="/chips">Chips</a>
      <a href="/stats">Stats</a>
      <a href="/ownership">Ownership</a>
      <a href="/squads">Squads</a>
      <a href="/live">ðŸ”´ Live</a>
    </div>
    
    <div id="auth-section" class="auth-section">
      <span class="loading-text">Loading...</span>
    </div>
  </div>
</nav>

<style>
  nav {
    padding: 1em;
    background: #f7fafc;
    border-bottom: 2px solid #e2e8f0;
    margin-bottom: 1.5em;
  }

  .nav-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
  }

  .hamburger {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    gap: 4px;
    min-width: 44px;
    min-height: 44px;
    justify-content: center;
    align-items: center;
  }

  .hamburger span {
    display: block;
    width: 25px;
    height: 3px;
    background: #2d3748;
    transition: all 0.3s ease;
  }

  .hamburger.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }

  .hamburger.active span:nth-child(2) {
    opacity: 0;
  }

  .hamburger.active span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -6px);
  }

  .nav-links {
    display: flex;
    align-items: center;
  }

  .nav-links a {
    margin-right: 1em;
    color: #2d3748;
    text-decoration: none;
    font-weight: bold;
    padding: 8px 12px;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
  }

  .nav-links a:hover {
    text-decoration: underline;
  }

  .auth-section {
    display: flex;
    align-items: center;
    gap: 1em;
  }

  .loading-text {
    color: #718096;
  }

  /* Mobile styles */
  @media (max-width: 768px) {
    .hamburger {
      display: flex;
      z-index: 1001;
    }

    .nav-links {
      position: fixed;
      top: 0;
      left: -100%;
      width: 80%;
      max-width: 300px;
      height: 100vh;
      background: #f7fafc;
      flex-direction: column;
      align-items: flex-start;
      padding: 80px 20px 20px 20px;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      transition: left 0.3s ease;
      z-index: 1000;
      overflow-y: auto;
    }

    .nav-links.active {
      left: 0;
    }

    .nav-links a {
      width: 100%;
      margin: 0;
      margin-bottom: 0.5em;
      padding: 12px 16px;
      border-radius: 4px;
      min-height: 48px;
      font-size: 16px;
    }

    .nav-links a:hover {
      background: #e2e8f0;
    }

    .auth-section {
      flex-direction: row;
      gap: 0.5em;
      justify-content: center;
    }
  }
</style>

<script>
  import { supabase } from '../lib/supabase.ts'

  const authSection = document.getElementById('auth-section')
  const hamburger = document.getElementById('hamburger-btn')
  const navLinks = document.getElementById('nav-links')

  // Hamburger menu toggle
  hamburger?.addEventListener('click', () => {
    hamburger.classList.toggle('active')
    navLinks?.classList.toggle('active')
  })

  // Close menu when clicking a link
  navLinks?.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      hamburger?.classList.remove('active')
      navLinks?.classList.remove('active')
    })
  })

  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    if (hamburger && navLinks && 
        !hamburger.contains(e.target as Node) && 
        !navLinks.contains(e.target as Node)) {
      hamburger.classList.remove('active')
      navLinks.classList.remove('active')
    }
  })

  async function updateAuthUI() {
    const { data: { user } } = await supabase.auth.getUser()
    
    if (user) {
      authSection.innerHTML = `
        <span style="margin-right: 0.5em; color: #2d3748;">${user.email}</span>
        <button id="logout-btn" style="padding: 10px 16px; background: #e53e3e; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; min-width: 44px; min-height: 44px;">
          Logout
        </button>
      `
      
      document.getElementById('logout-btn')?.addEventListener('click', async () => {
        await supabase.auth.signOut()
        window.location.href = '/login'
      })
    } else {
      authSection.innerHTML = `
        <a href="/login" style="padding: 10px 16px; background: #3182ce; color: white; text-decoration: none; border-radius: 4px; font-weight: bold; min-width: 44px; min-height: 44px; display: inline-flex; align-items: center; justify-content: center;">
          Login
        </a>
        <a href="/signup" style="padding: 10px 16px; background: #38a169; color: white; text-decoration: none; border-radius: 4px; font-weight: bold; min-width: 44px; min-height: 44px; display: inline-flex; align-items: center; justify-content: center;">
          Sign Up
        </a>
      `
    }
  }

  updateAuthUI()

  // Listen for auth changes
  supabase.auth.onAuthStateChange((event, session) => {
    updateAuthUI()
  })
</script>