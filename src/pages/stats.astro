---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
---
<Layout title="League Statistics & Manager Summary - FPL Manager Data">
  <Nav />

  <div class="page">
    <header class="page-header">
      <h1 class="page-title">League Statistics &amp; Manager Summary</h1>
      <p class="page-subtitle">
        Overview of all managers' performance, rankings, and chip usage.
      </p>
    </header>

    <div class="meta-row">
      <span id="manager-count" class="badge">Loading managers...</span>
      <a href="/managers" class="badge">âš™ Manage IDs</a>
    </div>

    <section class="controls" aria-label="Stats controls">
      <div class="control" style="grid-column: span 3;">
        <label class="label" for="gw-filter" style="white-space: nowrap;">Select GW</label>
        <input
          class="input"
          type="number"
          id="gw-filter"
          min="1"
          max="38"
          placeholder="Auto"
          inputmode="numeric"
          style="max-width: 180px;"
        />
      </div>

      <div class="control" style="grid-column: span 9;">
        <label class="label" style="white-space: nowrap;">Actions</label>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button id="refresh-btn" class="btn btn--primary" type="button">ðŸ”„ Refresh Data</button>
        </div>
      </div>
    </section>

    <div id="loading-status" class="meta-row"></div>

    <section id="stats-output" aria-live="polite"></section>
  </div>

  <script>
    import { supabase } from '../lib/supabase.ts'

    async function loadManagerIdsFromSupabase() {
      const { data
